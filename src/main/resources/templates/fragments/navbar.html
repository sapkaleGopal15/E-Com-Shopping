
<!-- templates/fragments/navbar.html -->
<div th:fragment="navbar">

<nav class="fixed top-0 left-0 w-full bg-white shadow-md z-50 transition-all duration-300">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-16 items-center">
      
      <!-- Logo -->
      <div class="shrink-0 flex items-center space-x-2">
        <a th:href="@{/home}"><img th:src="@{/images/logo.png}" alt="Logo" class="h-10 w-10 rounded-full"></a>
        <a th:href="@{/home}" class="text-2xl font-bold text-blue-600 hover:text-blue-700 transition-all">Gopal Shopping</a>
      </div>

      <!-- Desktop Menu -->
      <div class="hidden md:flex space-x-6 text-gray-700 font-medium">
        <a th:href="@{/home}" class="hover:text-blue-600 transition-all duration-300">Home</a>
        <a th:href="@{/product}" class="hover:text-blue-600 transition-all duration-300">Products</a>
        <a th:href="@{/about}" class="hover:text-blue-600 transition-all duration-300">About</a>
        <a th:href="@{/contact}" class="hover:text-blue-600 transition-all duration-300">Contact</a>

        <!-- Dynamic User Menu -->
        <span th:if="${session.user != null}">
          <a th:href="@{/profile}" class="hover:text-blue-600 transition-all duration-300">Hi, <span th:text="${session.user.username}">User</span></a>
          <a th:href="@{/logout}" class="hover:text-red-500 transition-all duration-300">Logout</a>
        </span>
        <span th:unless="${session.user != null}">
          <a th:href="@{/login}" class="hover:text-blue-600 transition-all duration-300">Login</a>
          <a th:href="@{/register}" class="hover:text-blue-600 transition-all duration-300">Signup</a>
        </span>
      </div>

      <!-- Mobile Menu Button -->
      <div class="md:hidden flex items-center">
        <button id="menu-toggle" class="text-gray-700 hover:text-blue-600 focus:outline-none">
          <svg id="menu-open-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <svg id="menu-close-icon" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Dropdown Menu -->
  <div id="mobile-menu" class="md:hidden bg-white shadow-lg hidden animate-fade-in-down">
    <div class="px-2 pt-2 pb-3 space-y-1 text-center text-gray-700 font-medium">
      <a th:href="@{/home}" class="block py-2 hover:text-blue-600 transition-all">Home</a>
      <a th:href="@{/product}" class="block py-2 hover:text-blue-600 transition-all">Products</a>
      <a th:href="@{/about}" class="block py-2 hover:text-blue-600 transition-all">About</a>
      <a th:href="@{/contact}" class="block py-2 hover:text-blue-600 transition-all">Contact</a>

      <span th:if="${session.user != null}">
        <a th:href="@{/profile}" class="block py-2 hover:text-blue-600">Hi, <span th:text="${session.user.username}">User</span></a>
        <a th:href="@{/logout}" class="block py-2 text-red-500 hover:text-red-600">Logout</a>
      </span>
      <span th:unless="${session.user != null}">
        <a th:href="@{/login}" class="block py-2 hover:text-blue-600">Login</a>
        <a th:href="@{/register}" class="block py-2 hover:text-blue-600">Signup</a>
      </span>
    </div>
  </div>
</nav>

<!-- Animation (Tailwind + JS) -->
<style>
@keyframes fade-in-down {
  0% { opacity: 0; transform: translateY(-10px); }
  100% { opacity: 1; transform: translateY(0); }
}
.animate-fade-in-down {
  animation: fade-in-down 0.3s ease-in-out;
}
</style>

<script>
document.getElementById("menu-toggle").addEventListener("click", function() {
  const menu = document.getElementById("mobile-menu");
  const openIcon = document.getElementById("menu-open-icon");
  const closeIcon = document.getElementById("menu-close-icon");
  menu.classList.toggle("hidden");
  openIcon.classList.toggle("hidden");
  closeIcon.classList.toggle("hidden");
});
</script>
</div>
