<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{index :: parent(~{::#content}, ~{::title})}">
<head>
  <meta charset="UTF-8">
  <title>Gopal Shop | My Cart Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-linear-to-br from-blue-50 via-indigo-50 to-white min-h-screen">
<div id="content">
  <section class="py-10 mt-10">
    <div class="container mx-auto px-4">

      <!-- Back Button -->
      <div class="flex justify-end mb-6">
        <a href="/user/dashboard"
           class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105">
          ‚Üê Back
        </a>
      </div>

      <!-- Cart Card -->
      <div class="bg-white shadow-2xl rounded-2xl p-8 pt-2 max-w-6xl mx-auto border border-gray-100 transition transform hover:shadow-indigo-200 duration-300">

        <!-- Header -->
        <div class="text-center mb-6">
          <h1 class="text-3xl font-bold text-indigo-600 animate-fade-in">üõí Cart Page</h1>

          <th:block th:if="${session.succMsg}">
            <p class="text-green-600 font-semibold mt-2 animate-fade-in">[[${session.succMsg}]]</p>
            <th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
          </th:block>

          <th:block th:if="${session.errorMsg}">
            <p class="text-red-500 font-semibold mt-2 animate-fade-in">[[${session.errorMsg}]]</p>
            <th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
          </th:block>
        </div>

        <!-- Table -->
        <div class="overflow-x-auto">
          <table class="min-w-full border-collapse border border-gray-200">
            <thead>
              <tr class="bg-indigo-600 text-white text-sm uppercase tracking-wider">
                <th class="py-3 px-4 text-left">Sl No</th>
                <th class="py-3 px-4 text-left">Image</th>
                <th class="py-3 px-4 text-left">Product Name</th>
                <th class="py-3 px-4 text-left">Price</th>
                <th class="py-3 px-4 text-center">Quantity</th>
                <th class="py-3 px-4 text-left">Total Price</th>
              </tr>
            </thead>

            <tbody class="bg-white divide-y divide-gray-200 text-gray-700">
              <tr th:each="cart,c:${products}" class="hover:bg-indigo-50 transition duration-300 ease-in-out">
                <td class="py-3 px-4 font-semibold">[[${c.count}]]</td>
                <td class="py-3 px-4">
                  <img th:src="@{'/images/products/'+${cart.image}}" alt="Product"
                       class="w-16 h-16 rounded-lg object-cover shadow-sm border">
                </td>
                <td class="py-3 px-4 font-medium">[[${cart.name}]]</td>
                <td class="py-3 px-4 text-indigo-600 font-semibold">‚Çπ [[${cart.price}]]</td>

                <td class="py-3 px-4 text-center space-x-2">
                  <a th:href="@{'/user/cartQuantityUpdate?sy=de&cid='+${cart.id}}"
                     class="text-indigo-600 hover:text-indigo-800 transition transform hover:scale-125">
                    <i class="fa-solid fa-minus"></i>
                  </a>
                  <span class="font-semibold text-gray-700">[[${cart.quantity}]]</span>
                  <a th:href="@{'/user/cartQuantityUpdate?sy=in&cid='+${cart.id}}"
                     class="text-indigo-600 hover:text-indigo-800 transition transform hover:scale-125">
                    <i class="fa-solid fa-plus"></i>
                  </a>
                </td>

                <td class="py-3 px-4 font-semibold text-green-600">‚Çπ [[${cart.totalPrice}]]</td>
              </tr>

              <!-- Total Row -->
              <tr class="bg-gray-50">
                <td colspan="4"></td>
                <td class="py-3 px-4 font-bold text-right text-gray-800">Total Price:</td>
                <td class="py-3 px-4 font-bold text-indigo-600">
                  <!-- <th:block th:utext="${@commonServiceImpl.rupeeSign()}"></th:block> -->
                  ‚Çπ [[${totalOrderPrice}]]
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Proceed Button -->
        <div class="text-center mt-8">
          <a th:href="@{'/user/order'}"
             class="bg-linear-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-black font-semibold px-6 py-3 rounded-xl shadow-md transition transform hover:scale-105">
            üí≥ Proceed to Payment
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Smooth Animation -->
  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fade-in 0.7s ease-in-out;
    }
  </style>

  <!-- FontAwesome Icons -->
  <script src="https://kit.fontawesome.com/a2e0f1f0e4.js" crossorigin="anonymous"></script>
</div>
</body>
</html>
