<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{index :: parent(~{::#content}, ~{::title})}">
<head>
  <meta charset="ISO-8859-1">
  <title>Gopal Shop | My Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/a2e0e6ad10.js" crossorigin="anonymous"></script>
</head>

<body class="bg-linear-to-br from-indigo-50 to-blue-100 min-h-screen font-[Poppins] flex items-center justify-center p-6">
  
    <div id="content">
    <section class="w-full mt-14 max-w-6xl bg-white shadow-2xl rounded-2xl p-10 relative overflow-hidden transition-all duration-300 hover:shadow-indigo-200">
    
    <!-- Back Button -->
    <a th:href="@{'/user/dashboard'}" 
       class="absolute top-6 right-6 flex items-center text-white bg-indigo-600 hover:bg-indigo-700 transition-all duration-300 px-4 py-2 rounded-lg shadow-md">
      <i class="fa-solid fa-arrow-left mr-2"></i> Back
    </a>

    <!-- Profile Header -->
    <div class="text-center mb-10">
      <h1 class="text-3xl font-bold text-gray-800 tracking-wide animate-fade-in">My Profile</h1>
      <p class="text-gray-500 mt-2">Manage your personal information and security</p>
    </div>

    <!-- Success / Error Messages -->
    <div class="text-center mb-5">
      <th:block th:if="${session.successMsg}">
        <p class="text-green-600 font-semibold animate-fade-in">[[${session.successMsg}]]</p>
        <th:block th:text="${@commonServiceImpl.removeMessage()}"></th:block>
      </th:block>
      <th:block th:if="${session.errorMsg}">
        <p class="text-red-500 font-semibold animate-fade-in">[[${session.errorMsg}]]</p>
        <th:block th:text="${@commonServiceImpl.removeMessage()}"></th:block>
      </th:block>
    </div>

    <!-- Profile Section -->
    <div class="flex flex-col items-center mb-10">
      <img alt="Profile Picture" 
           th:src="@{'/images/profile_img/'+${logedUser.profileImage}}" 
           class="w-28 h-28 rounded-full border-4 border-indigo-500 shadow-lg p-1 hover:scale-105 transition-transform duration-300">

      <form th:action="@{'/user/update-profile/' + ${logedUser.id}}" method="post" enctype="multipart/form-data" 
            class="w-full max-w-2xl bg-linear-to-b mt-8 from-indigo-50 to-white p-6 rounded-xl shadow-md hover:shadow-indigo-200 transition-transform duration-300">
        
        <h2 class="text-2xl font-semibold text-indigo-700 mb-4 text-center">Edit Profile</h2>
        <hr class="mb-5 border-indigo-300">

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-gray-600 font-medium mb-1">Name</label>
            <input type="text" th:value="${logedUser.name}" required  name="name" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
             
        </div>
          <div>
            <label class="block text-gray-600 font-medium mb-1">Mobile Number</label>
            <input type="number" th:value="${logedUser.contact}" minlength="10" maxlength="10" required name="contact" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4 mt-4">
          <div>
            <label class="block text-gray-600 font-medium mb-1">Email</label>
            <input type="text" readonly th:value="${logedUser.email}" class="w-full border border-gray-200 rounded-lg p-2 bg-gray-100 cursor-not-allowed">
          </div>
          <div>
            <label class="block text-gray-600 font-medium mb-1">Address</label>
            <input type="text" th:value="${logedUser.address}" required name="address" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          </div>
        </div>

        <div class="grid grid-cols-3 gap-4 mt-4">
          <div>
            <label class="block text-gray-600 font-medium mb-1">City</label>
            <input type="text" th:value="${logedUser.city}" required name="city" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          </div>
          <div>
            <label class="block text-gray-600 font-medium mb-1">State</label>
            <input type="text" th:value="${logedUser.state}" required name="state" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          </div>
          <div>
            <label class="block text-gray-600 font-medium mb-1">Pincode</label>
            <input type="text" th:value="${logedUser.pincode}" minlength="6" maxlength="6" required name="pincode" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          </div>
        </div>

        <div class="grid grid-cols-2 gap-4 mt-4">
          <div>
            <label class="block text-gray-600 font-medium mb-1">Profile Image</label>
            <input type="file" name="file" class="w-full border border-gray-300 rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-indigo-400">
          </div>
          <!-- <div>
            <label class="block text-gray-600 font-medium mb-1">Role</label>
            <input type="text" th:value="${logedUser.role}" readonly class="w-full border border-gray-200 rounded-lg p-2 bg-gray-100 cursor-not-allowed">
          </div> 
        </div>

        <div class="grid grid-cols-2 gap-4 mt-4"> -->
          <div>
            <label class="block text-gray-600 font-medium mb-1">Account Status</label>
            <input type="text" th:value="${logedUser.status}" readonly class="w-full border border-gray-200 rounded-lg p-2 bg-gray-100 cursor-not-allowed">
            <input type="hidden" name="id">
          </div>
        </div>

        <div class="text-center mt-6">
          <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-2 rounded-lg shadow-md transition-all duration-300 transform hover:-translate-y-1 hover:shadow-xl">
            <i class="fa-solid fa-pen-to-square mr-2"></i> Update Profile
          </button>
        </div>
      </form>
    </div>

    <!-- Change Password Section -->
    <div class="w-full max-w-2xl mx-auto bg-linear-to-b from-indigo-50 to-white p-6 rounded-xl shadow-md hover:shadow-indigo-200 transition-transform duration-300">
      <h2 class="text-2xl font-semibold text-indigo-700 text-center mb-4">Change Password</h2>
      <hr class="mb-5 border-indigo-300">

      <form th:action="@{'/user/update-password/' +${logedUser.id}}" method="post">
        <div class="space-y-4">
          <div>
            <label class="block text-gray-600 font-medium mb-1">Current Password</label>
            <input type="password" name="currentPassword" required class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          </div>
          <div>
            <label class="block text-gray-600 font-medium mb-1">New Password</label>
            <input type="password" name="newPassword" required class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          </div>
          <div>
            <label class="block text-gray-600 font-medium mb-1">Confirm Password</label>
            <input type="password" name="confirmPassword" required class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-400">
          </div>
        </div>

        <div class="text-center mt-6">
          <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-2 rounded-lg shadow-md transition-all duration-300 transform hover:-translate-y-1 hover:shadow-xl">
            <i class="fa-solid fa-lock mr-2"></i> Update Password
          </button>
        </div>
      </form>
    </div>

  </section>

  <!-- Smooth animation -->
  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in { animation: fade-in 0.8s ease-out; }
  </style>
  </div>
</body>
</html>
