<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{index :: parent(~{::#content}, ~{::title})}">
<head>
    <meta charset="UTF-8">
    <title>User Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a2d9d6a60f.js" crossorigin="anonymous"></script>
</head>

<body class="bg-gray-50 text-gray-800 font-sans">
<div id="content">
<section class="py-8 px-4">
    <div class="max-w-7xl mx-auto bg-white shadow-2xl rounded-2xl p-8 transition-all duration-500 hover:shadow-3xl mt-5">

        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-400 bg-clip-text text-transparent">
                <span th:if="${userType==1}">Users</span>
                <span th:if="${userType==2}">Admins</span>
            </h2>

            <a href="/admin/" class="bg-gradient-to-r from-indigo-600 to-blue-500 text-white px-4 py-2 rounded-md shadow-md 
               hover:scale-105 hover:shadow-lg transition-all duration-300 flex items-center gap-2">
                <i class="fa-solid fa-arrow-left"></i> Back
            </a>
        </div>

        <!-- Messages -->
        <div class="text-center mb-4">
            <th:block th:if="${session.succMsg}">
                <p class="text-green-600 font-semibold animate-pulse">[[${session.succMsg}]]</p>
                <th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
            </th:block>

            <th:block th:if="${session.errorMsg}">
                <p class="text-red-600 font-semibold animate-pulse">[[${session.errorMsg}]]</p>
                <th:block th:text="${@commnServiceImpl.removeSessionMessage()}"></th:block>
            </th:block>
        </div>

        <!-- Table -->
        <div class="overflow-x-auto">
            <table class="min-w-full border border-gray-200 rounded-lg overflow-hidden shadow-sm">
                <thead class="bg-gradient-to-r from-indigo-600 to-blue-400 text-white">
                    <tr>
                        <th class="py-3 px-4 text-left text-sm">Sl No</th>
                        <th class="py-3 px-4 text-left text-sm">Profile</th>
                        <th class="py-3 px-4 text-left text-sm">Name</th>
                        <th class="py-3 px-4 text-left text-sm">Email</th>
                        <th class="py-3 px-4 text-left text-sm">Mobile No</th>
                        <th class="py-3 px-4 text-left text-sm">Address</th>
                        <th class="py-3 px-4 text-left text-sm">Status</th>
                        <th class="py-3 px-4 text-left text-sm">Action</th>
                    </tr>
                </thead>

                <tbody class="divide-y divide-gray-200">
                    <tr th:each="u,c:${users}" class="hover:bg-blue-50 transition-all duration-300">
                        <td class="py-3 px-4 font-medium text-gray-700">[[${c.count}]]</td>

                        <td class="py-3 px-4">
                            <img th:src="@{'/img/profile_img/'+${u.profileImage}}"
                                 class="w-14 h-14 rounded-full border border-gray-300 shadow-md transform hover:scale-105 transition-all duration-300"
                                 alt="Profile">
                        </td>

                        <td class="py-3 px-4">[[${u.name}]]</td>
                        <td class="py-3 px-4">[[${u.email}]]</td>
                        <td class="py-3 px-4">[[${u.mobileNumber}]]</td>

                        <td class="py-3 px-4 text-sm leading-5">
                            [[${u.address+','+u.city+','+u.state+','+u.pincode}]]
                        </td>

                        <td class="py-3 px-4">
                            <span th:text="${u.isEnable}"
                                  th:classappend="${u.isEnable} ? 'bg-green-500 text-white px-2 py-1 rounded-md text-xs' :
                                                    'bg-red-500 text-white px-2 py-1 rounded-md text-xs'">
                            </span>
                        </td>

                        <td class="py-3 px-4 flex gap-2">
                            <a th:href="@{'/admin/updateSts?status=true&id='+${u.id}}+'&type='+${userType}"
                               class="bg-green-500 text-white text-sm px-3 py-1 rounded-md shadow-md hover:bg-green-600 hover:scale-105 transition-all duration-300">
                                Active
                            </a>

                            <a th:href="@{'/admin/updateSts?status=false&id='+${u.id}}+'&type='+${userType}"
                               class="bg-red-500 text-white text-sm px-3 py-1 rounded-md shadow-md hover:bg-red-600 hover:scale-105 transition-all duration-300">
                                Inactive
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</section>
</div>
</body>
</html>
