<!DOCTYPE html>
<html lang="en"	th:replace="~{index :: parent(~{::#content}, ~{::title})}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gopal Shop | View All Products</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <style>
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeInUp { animation: fadeInUp 0.6s ease-out forwards; }
  </style>
</head>

<body class="bg-linear-to-br from-indigo-50 via-white to-blue-100 min-h-screen text-gray-800">
<div id="content">
  
<section class="py-8 px-2 mt-5 animate-fadeInUp">
  <div class="max-w-7xl mx-auto bg-white/80 backdrop-blur-xl rounded-2xl shadow-2xl p-5 border border-gray-100">

    <div class="flex items-center justify-between mb-6">
      <h2 class="text-3xl font-bold text-indigo-700">üõçÔ∏è All Products</h2>
      <a href="/admin/" class="text-blue-600 hover:text-blue-800 font-medium transition">
        <i class="fa-solid fa-arrow-left"></i> Back
      </a>
    </div>

    
    <div class="space-y-2 mb-4">
      <th:block th:if="${session.successMsg}">
        <p class="bg-green-100 text-green-700 px-4 py-2 rounded-lg font-semibold">[[${session.successMsg}]]</p>
        <th:block th:text="${@commonServiceImpl.removeMessage()}"></th:block>
      </th:block>

      <th:block th:if="${session.errorMsg}">
        <p class="bg-red-100 text-red-700 px-4 py-2 rounded-lg font-semibold">[[${session.errorMsg}]]</p>
        <th:block th:text="${@commonServiceImpl.removeMessage()}"></th:block>
      </th:block>
    </div>

    <form th:action="@{'/admin/search-product'}" method="post" class="mb-6">
      <div class="flex flex-col sm:flex-row gap-3 sm:items-center">
        <input type="text" name="search" placeholder="Search products..."
          class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none shadow-sm">
        <button
          class="bg-linear-to-r from-indigo-600 to-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-indigo-700 hover:to-blue-700 transition-all duration-300 shadow-md">
          <i class="fa-solid fa-magnifying-glass"></i> Search
        </button>
      </div>
    </form>

    <div class="overflow-x-auto rounded-xl border border-gray-200 shadow-lg bg-white">
      <table class="min-w-full text-sm text-left">
        <thead class="bg-linear-to-r from-indigo-600 to-blue-600 text-white uppercase text-xs tracking-wider">
          <tr>
            <th class="px-4 py-3">Sr No.</th>
            <th class="px-4 py-3">Prod Id</th>
            <th class="px-4 py-3">Image</th>
            <th class="px-4 py-3">Title</th>
            <th class="px-4 py-3">Category</th>
            <th class="px-4 py-3">Price</th>
            <th class="px-4 py-3">Discount</th>
            <th class="px-4 py-3">Discount Price</th>
            <th class="px-4 py-3">Status</th>
            <th class="px-4 py-3">Stock</th>
            <th class="px-4 py-3">Action</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-100 text-gray-700">
          <th:block th:if="${allProduct == 'allProduct'}">
            <tr th:each="p,c:${products.content}" class="hover:bg-blue-50 transition-all duration-200">
              <td class="px-4 py-3 font-medium" th:text="${((currentPage * pageSize) + c.index) + 1}"></td>
              <td class="px-4 py-3 font-medium">[[${p.id}]]</td>
              <td class="px-4 py-3">
                <img th:src="@{'/images/products/'+${p.imageName}}" alt="Product Image"
                    class="w-14 h-14 object-cover rounded-lg shadow-sm border border-gray-200">
              </td>
              <td class="px-4 py-3 font-semibold text-gray-800">[[${p.title}]]</td>
              <td class="px-4 py-3">[[${p.category}]]</td>
              <td class="px-4 py-3 text-green-700 font-semibold">‚Çπ[[${p.price}]]</td>
              <th class="px-4 py-3 text-green-700 font-semibold">[[${p.discount}]]%</th>
              <th class="px-4 py-3 text-gray-900 font-semibold">‚Çπ[[${p.discountPrice}]]</th>
              <td class="px-4 py-3">
                <span th:if="${p.isActive}" class="inline-block bg-green-500 text-white text-xs px-2 py-1 rounded-md">Active</span>
                <span th:if="${!p.isActive}" class="inline-block bg-red-500 text-white text-xs px-2 py-1 rounded-md">InActive</span>
              </td>
              <td class="px-4 py-3">
                <span th:if="${p.stock > 0}" class="inline-block bg-green-100 text-green-700 text-xs px-2 py-1 rounded-md">Available ([[${p.stock}]])</span>
                <span th:if="${p.stock == 0}" class="inline-block bg-yellow-400 text-black text-xs px-2 py-1 rounded-md">Out of Stock</span>
              </td>
              <td class="px-4 py-3 space-x-3">
                <a th:href="@{'/admin/edit-product/'+${p.id}}"
                  class="text-indigo-600 hover:text-indigo-800 font-medium transition">
                  <i class="fa-solid fa-pen-to-square"></i> Edit
                </a>
                <a th:href="@{'/admin/delete-product/'+${p.id}}"
                  class="text-red-600 hover:text-red-800 font-medium transition">
                  <i class="fa-solid fa-trash"></i> Delete
                </a>
              </td>
            </tr>
          </th:block>

          <th:block th:unless="${products == 'products'}">
            <tr th:each="p,c:${searchProducts}" class="hover:bg-blue-50 transition-all duration-200">
              <td class="px-4 py-3 font-medium">[[${c.count}]]</td>
              <td class="px-4 py-3 font-medium">[[${p.id}]]</td>
              <td class="px-4 py-3">
                <img th:src="@{'/images/products/'+${p.imageName}}" alt="Product Image"
                    class="w-14 h-14 object-cover rounded-lg shadow-sm border border-gray-200">
              </td>
              <td class="px-4 py-3 font-semibold text-gray-800">[[${p.title}]]</td>
              <td class="px-4 py-3">[[${p.category}]]</td>
              <td class="px-4 py-3 text-green-700 font-semibold">‚Çπ[[${p.price}]]</td>
              <th class="px-4 py-3 text-green-700 font-semibold">[[${p.discount}]]%</th>
              <th class="px-4 py-3 text-gray-900 font-semibold">‚Çπ[[${p.discountPrice}]]</th>
              <td class="px-4 py-3">
                <span th:if="${p.isActive}" class="inline-block bg-green-500 text-white text-xs px-2 py-1 rounded-md">Active</span>
                <span th:if="${!p.isActive}" class="inline-block bg-red-500 text-white text-xs px-2 py-1 rounded-md">InActive</span>
              </td>
              <td class="px-4 py-3">
                <span th:if="${p.stock > 0}" class="inline-block bg-green-100 text-green-700 text-xs px-2 py-1 rounded-md">Available ([[${p.stock}]])</span>
                <span th:if="${p.stock == 0}" class="inline-block bg-yellow-400 text-black text-xs px-2 py-1 rounded-md">Out of Stock</span>
              </td>
              <td class="px-4 py-3 space-x-3">
                <a th:href="@{'/admin/edit-product/'+${p.id}}"
                  class="text-indigo-600 hover:text-indigo-800 font-medium transition">
                  <i class="fa-solid fa-pen-to-square"></i> Edit
                </a>
                <a th:href="@{'/admin/delete-product/'+${p.id}}"
                  class="text-red-600 hover:text-red-800 font-medium transition">
                  <i class="fa-solid fa-trash"></i> Delete
                </a>
              </td>
            </tr>
          </th:block>
        </tbody>
      </table>
    </div>

    <th:block th:if="${productNotFound == 'productNotFound'}">
        <h3 class="text-red-600 font-semibold p-5">Product Not Found</h3>
    </th:block>

    <th:block th:if="${allProduct == 'allProduct'}">
      <div class="flex flex-wrap items-center justify-between mt-6 text-sm text-gray-600">
        <p>Total Products:
          <span class="font-semibold text-gray-800">[[${products.getTotalElements}]]</span>
        </p>
      </div>

    
      
      <div class="flex justify-center mt-4">
        <nav>
          <ul class="flex gap-2 text-sm">

            
              <li th:if="${currentPage > 0}">
                  <a th:href="@{'/admin/view-products?page=' + ${currentPage - 1}}" 
                    class="px-3 py-2 font-semibold rounded"><<<</a>
              </li>

              <li th:if="${startPage > 0}">
                  <a th:href="@{'/admin/view-products?page=0'}" 
                    class="px-3 py-2 font-semibold rounded">1</a>
              </li>

              <li th:if="${startPage > 1}">
                  <span class="px-3 py-2">...</span>
              </li>

              <li th:each="i : ${#numbers.sequence(startPage, endPage)}">
                  <a th:href="@{'/admin/view-products?page=' + ${i}}"
                    th:classappend="${currentPage == i} ? 'bg-blue-600 text-white' : ''"
                    class="px-3 py-2 rounded font-semibold"
                    th:text="${i + 1}"></a>
              </li>

              <li th:if="${endPage < totalPages - 2}">
                  <span class="px-3 py-2">...</span>
              </li>

              <li th:if="${endPage < totalPages - 1}">
                  <a th:href="@{'/admin/view-products?page=' + ${totalPages - 1}}"
                    class="px-3 py-2 font-semibold rounded"
                    th:text="${totalPages}"></a>
              </li>

              <li th:if="${currentPage < totalPages - 1}">
                  <a th:href="@{'/admin/view-products?page=' + ${currentPage + 1}}" 
                    class="px-3 py-2 font-semibold rounded">>>></a>
              </li>

            </ul>
          </nav>
        </div>
    </th:block>

  </div>

</section>

</div>
</body>
</html>





