<!DOCTYPE html>
<html lang="en"	th:replace="~{index :: parent(~{::#content}, ~{::title})}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gopal Shop | View All Products</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <style>
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeInUp { animation: fadeInUp 0.6s ease-out forwards; }
  </style>
</head>

<body class="bg-linear-to-br from-indigo-50 via-white to-blue-100 min-h-screen text-gray-800">
<div id="content">
  <!-- <div>

    <h2>
      view Products
    </h2>

    <p>
      Lorem ipsum dolor sit, amet consectetur adipisicing elit. Libero obcaecati nulla autem quia unde. Sapiente, eaque! Doloribus aspernatur quisquam rem.
    </p>

  </div> -->
<section class="py-10 px-6 animate-fadeInUp">
  <div class="max-w-7xl mx-auto bg-white/80 backdrop-blur-xl rounded-2xl shadow-2xl p-8 border border-gray-100">

    <div class="flex items-center justify-between mb-6">
      <h2 class="text-3xl font-bold text-indigo-700">üõçÔ∏è All Products</h2>
      <a href="/admin/" class="text-blue-600 hover:text-blue-800 font-medium transition">
        <i class="fa-solid fa-arrow-left"></i> Back
      </a>
    </div>

    
    <div class="space-y-2 mb-4">
      <th:block th:if="${session.successMsg}">
        <p class="bg-green-100 text-green-700 px-4 py-2 rounded-lg font-semibold">[[${session.successMsg}]]</p>
        <th:block th:text="${@commonServiceImpl.removeMessage()}"></th:block>
      </th:block>

      <th:block th:if="${session.errorMsg}">
        <p class="bg-red-100 text-red-700 px-4 py-2 rounded-lg font-semibold">[[${session.errorMsg}]]</p>
        <th:block th:text="${@commonServiceImpl.removeMessage()}"></th:block>
      </th:block>
    </div>

   
    <form action="/admin/products" method="get" class="mb-6">
      <div class="flex flex-col sm:flex-row gap-3 sm:items-center">
        <input type="text" name="ch" placeholder="Search products..."
          class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none shadow-sm">
        <button
          class="bg-linear-to-r from-indigo-600 to-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:from-indigo-700 hover:to-blue-700 transition-all duration-300 shadow-md">
          <i class="fa-solid fa-magnifying-glass"></i> Search
        </button>
      </div>
    </form>

    <div class="overflow-x-auto rounded-xl border border-gray-200 shadow-lg bg-white">
      <table class="min-w-full text-sm text-left">
        <thead class="bg-linear-to-r from-indigo-600 to-blue-600 text-white uppercase text-xs tracking-wider">
          <tr>
            <th class="px-4 py-3">Sl No</th>
            <th class="px-4 py-3">Image</th>
            <th class="px-4 py-3">Title</th>
            <th class="px-4 py-3">Category</th>
            <th class="px-4 py-3">Price</th>
            <th class="px-4 py-3">Discount</th>
            <th class="px-4 py-3">Discount Price</th>
            <th class="px-4 py-3">Status</th>
            <th class="px-4 py-3">Stock</th>
            <th class="px-4 py-3">Action</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-100 text-gray-700">
          <tr th:each="p,c:${products}" class="hover:bg-blue-50 transition-all duration-200">
            <td class="px-4 py-3 font-medium">[[${c.count}]]</td>
            <td class="px-4 py-3">
              <img th:src="@{'/images/products/'+${p.imageName}}" alt="Product Image"
                   class="w-14 h-14 object-cover rounded-lg shadow-sm border border-gray-200">
            </td>
            <td class="px-4 py-3 font-semibold text-gray-800">[[${p.title}]]</td>
            <td class="px-4 py-3">[[${p.category}]]</td>
            <td class="px-4 py-3 text-green-700 font-semibold">‚Çπ[[${p.price}]]</td>
            <th class="px-4 py-3 text-green-700 font-semibold">[[${p.discount}]]%</th>
            <th class="px-4 py-3 text-gray-900 font-semibold">‚Çπ[[${p.discountPrice}]]</th>
            <td class="px-4 py-3">
              <span th:if="${p.isActive}" class="inline-block bg-green-500 text-white text-xs px-2 py-1 rounded-md">Active</span>
              <span th:if="${!p.isActive}" class="inline-block bg-red-500 text-white text-xs px-2 py-1 rounded-md">Inactive</span>
            </td>
            <td class="px-4 py-3">
              <span th:if="${p.stock > 0}" class="inline-block bg-green-100 text-green-700 text-xs px-2 py-1 rounded-md">Available ([[${p.stock}]])</span>
              <span th:if="${p.stock == 0}" class="inline-block bg-yellow-400 text-black text-xs px-2 py-1 rounded-md">Out of Stock</span>
            </td>
            <td class="px-4 py-3 space-x-3">
              <a th:href="@{'/admin/edit-product/'+${p.id}}"
                class="text-indigo-600 hover:text-indigo-800 font-medium transition">
                <i class="fa-solid fa-pen-to-square"></i> Edit
              </a>
              <a th:href="@{'/admin/delete-product/'+${p.id}}"
                class="text-red-600 hover:text-red-800 font-medium transition">
                <i class="fa-solid fa-trash"></i> Delete
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="flex flex-wrap items-center justify-between mt-6 text-sm text-gray-600">
      <p>Total Products:
        <span class="font-semibold text-gray-800">[[${totalElements}]]</span>
      </p>

      <!-- <nav aria-label="Pagination">
        <ul class="flex items-center space-x-2">
          <li th:classappend="${isFirst} ? 'opacity-50 cursor-not-allowed':''">
            <a th:href="@{'/admin/products?pageNo='+${pageNo-1}}"
              class="px-3 py-1 border rounded hover:bg-gray-100 transition">&laquo;</a>
          </li>

          <li th:each="i:${#numbers.sequence(1,totalPages)}"
            th:classappend="${pageNo+1==i}?'bg-indigo-600 text-white':''"
            class="px-3 py-1 border rounded hover:bg-blue-50 transition">
            <a th:href="@{'/admin/products?pageNo='+${i-1}}">[[${i}]]</a>
          </li>

          <li th:classappend="${isLast} ? 'opacity-50 cursor-not-allowed':''">
            <a th:href="@{'/admin/products?pageNo='+${pageNo+1}}"
              class="px-3 py-1 border rounded hover:bg-gray-100 transition">&raquo;</a>
          </li>
        </ul>
      </nav> -->
    </div>

  </div>
</section>
</div>
</body>
</html>
